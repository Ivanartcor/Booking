<div class="modal-overlay" (click)="close.emit()"></div>

<div class="modal-content">
  <!-- Bot칩n de cierre -->
  <button class="close-btn" (click)="close.emit()">칑</button>

  <!-- T칤tulo del servicio -->
  <h2 class="modal-title">Reservar Cita</h2>


  <!-- Horarios Disponibles -->
  <h3>Horarios Disponibles</h3>
  <div class="availability-container">
    <ul class="availability-list">
      <li *ngFor="let avail of availabilities">
        <strong>{{ avail.day_of_week }}:</strong> {{ avail.start_time }} - {{ avail.end_time }}
      </li>
    </ul>
  </div>

  <!-- 游늷 Selector de fecha -->
  <label for="date">Fecha:</label>
  <input 
    id="date" 
    type="date" 
    [(ngModel)]="appointmentDate" 
    (change)="onDateChange($event)"
    [min]="minDate"
    required>

  <p class="error-msg" *ngIf="invalidDateMessage">{{ invalidDateMessage }}</p>

  <!-- 游늷 Selector de hora -->
  <label for="time">Hora:</label>
  <input 
    id="time" 
    type="time" 
    [(ngModel)]="appointmentTime" 
    (change)="validateSelectedTime()"
    [min]="minTime"
    [max]="maxTime"
    [disabled]="appointmentDate === ''"
    required>

  <p class="error-msg" *ngIf="invalidTimeMessage">{{ invalidTimeMessage }}</p>

  <!-- 游늷 Campo para notas -->
  <label for="notes">Notas:</label>
  <textarea id="notes" [(ngModel)]="appointmentNotes" placeholder="A침adir nota (opcional)"></textarea>

  <!-- 游늷 Mensaje de error general -->
  <p class="error-msg" *ngIf="errorMessage">{{ errorMessage }}</p>

  <!-- 游늷 Bot칩n de confirmaci칩n -->
  <button class="confirm-btn" (click)="createAppointment()" [disabled]="loading || appointmentDate === '' || appointmentTime === ''">
    {{ loading ? 'Reservando...' : 'Confirmar Reserva' }}
  </button>
</div>
