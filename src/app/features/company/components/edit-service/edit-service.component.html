<div class="modal-overlay" (click)="closeModal()"></div>

<div class="modal-content">
  <button class="close-btn" (click)="closeModal()">√ó</button>
  <h2 class="modal-title">Editar Servicio</h2>

  <form (ngSubmit)="updateService()">
    <!-- üîπ Nombre del Servicio -->
    <div class="form-group">
      <label for="name">Nombre del Servicio</label>
      <input type="text" id="name" [(ngModel)]="service.name" name="name" required />
    </div>

    <!-- üîπ Descripci√≥n -->
    <div class="form-group">
      <label for="description">Descripci√≥n</label>
      <textarea id="description" [(ngModel)]="service.description" name="description" required></textarea>
    </div>

    <!-- üîπ Precio -->
    <div class="form-group">
      <label for="price">Precio (‚Ç¨)</label>
      <input type="number" id="price" [(ngModel)]="service.price" name="price" required min="1" />
    </div>

    <!-- üîπ Duraci√≥n -->
    <div class="form-group">
      <label for="duration">Duraci√≥n (minutos)</label>
      <input type="number" id="duration" [(ngModel)]="service.durationMinutes" name="duration" required min="1" />
    </div>

    <!-- üîπ Categor√≠a -->
    <div class="form-group">
      <label for="category">Categor√≠a</label>
      <select id="category" [(ngModel)]="service.category" name="category" required>
        <option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
    </div>

    <!-- üîπ Empleados Asignados -->
    <div class="form-group">
      <label>Empleados Asignados</label>
      <div class="checkbox-group">
        <label *ngFor="let employee of employees">
          <input type="checkbox" [value]="employee.id" (change)="toggleEmployeeSelection(employee.id, $event)"
            [checked]="service.assignedEmployees.includes(employee.id)" />
          {{ employee.name }} - {{ employee.position }}
        </label>
      </div>
    </div>

    <!-- üîπ D√≠as Disponibles -->
    <div class="form-group">
      <label>D√≠as Disponibles</label>
      <div class="checkbox-group">
        <label *ngFor="let day of availableDays">
          <input type="checkbox" [value]="day" (change)="toggleDaySelection(day, $event)"
            [checked]="service.availability && service.availability.some(a => a.dayOfWeek === day)" />
          {{ day }}
        </label>
      </div>
    </div>

    <!-- üîπ Horarios por D√≠a -->
    <div class="form-group" *ngFor="let avail of service.availability">
      <label>Horario para {{ avail.dayOfWeek }}</label>
      <div class="time-group">
        <input type="time" [(ngModel)]="avail.startTime" name="startHour-{{ avail.dayOfWeek }}" required />
        a
        <input type="time" [(ngModel)]="avail.endTime" name="endHour-{{ avail.dayOfWeek }}" required />
      </div>
    </div>

    <!-- üîπ Mensajes de Error -->
    <div class="error-messages" *ngIf="errors.length > 0">
      <ul>
        <li *ngFor="let error of errors">{{ error }}</li>
      </ul>
    </div>

    <button type="submit" class="btn custom-btn-success">Guardar Cambios</button>
  </form>
</div>
