<div class="modal-overlay" (click)="closeModal()"></div>

<div class="modal-content">
  <button class="close-btn" (click)="closeModal()">√ó</button>
  <h2 class="modal-title">Editar Servicio</h2>

  <form (ngSubmit)="updateService()">
    <!-- üîπ Nombre del Servicio -->
    <div class="form-group">
      <label for="name">Nombre</label>
      <input type="text" id="name" [(ngModel)]="service.name" name="name" required />
    </div>

    <!-- üîπ Descripci√≥n -->
    <div class="form-group">
      <label for="description">Descripci√≥n</label>
      <textarea id="description" [(ngModel)]="service.description" name="description" required></textarea>
    </div>

    <!-- üîπ Tipo de Servicio -->
    <div class="form-group">
      <label for="type">Tipo de Servicio</label>
      <select id="type" [(ngModel)]="service.type" name="type" required>
        <option value="in_person">Presencial</option>
        <option value="online">Online</option>
        <option value="at_home">A domicilio</option>
      </select>
    </div>

    <!-- üîπ Precio -->
    <div class="form-group">
      <label for="price">Precio (‚Ç¨)</label>
      <input type="number" id="price" [(ngModel)]="service.price" name="price" required min="1" />
    </div>

    <!-- üîπ Duraci√≥n -->
    <div class="form-group">
      <label for="duration">Duraci√≥n (minutos)</label>
      <input type="number" id="duration" [(ngModel)]="service.duration_minutes" name="duration" required min="1" />
    </div>

    <!-- üîπ Estado -->
    <div class="form-group">
      <label for="status">Estado</label>
      <select id="status" [(ngModel)]="service.status" name="status" required>
        <option value="active">Activo</option>
        <option value="inactive">Inactivo</option>
        <option value="suspended">Suspendido</option>
      </select>
    </div>

    <!-- üîπ Categor√≠a -->
    <div class="form-group">
      <label for="category">Categor√≠a</label>
      <select id="category" [(ngModel)]="service.category" name="category" required>
        <option *ngFor="let category of categories" [value]="category.id">
          {{ category.name }}
        </option>
      </select>
    </div>

    <!-- üîπ Empleados Asignados -->
    <div class="form-group">
      <label>Empleados Asignados</label>
      <div class="checkbox-group">
        <label *ngFor="let employee of employees">
          <input 
            type="checkbox" 
            [value]="employee.id" 
            (change)="toggleEmployeeSelection(employee.id, $event)"
            [checked]="assignedEmployees.includes(employee.id)" />
          {{ employee.name }}
        </label>
      </div>
    </div>

    <!-- üîπ D√≠as Disponibles -->
    <div class="form-group">
      <label>D√≠as Disponibles</label>
      <div class="checkbox-group">
        <label *ngFor="let day of availableDays">
          <input 
            type="checkbox" 
            [value]="day" 
            (change)="toggleDaySelection(day, $event)"
             />
          {{ day }}
        </label>
      </div>
    </div>

    <!-- üîπ Horarios de disponibilidad -->
    <div *ngFor="let avail of service.availability; let i = index" class="form-group">
      <label>Horario para {{ avail.day_of_week }}</label>
      <div class="time-group">
        <input 
          type="time" 
          [(ngModel)]="avail.start_time" 
          name="start_time_{{i}}" 
          (change)="updateAvailability(avail.day_of_week, 'start_time', $event)"
          [ngModelOptions]="{standalone: true}" 
          required
        />
        a
        <input 
          type="time" 
          [(ngModel)]="avail.end_time" 
          name="end_time_{{i}}" 
          (change)="updateAvailability(avail.day_of_week, 'end_time', $event)"
          [ngModelOptions]="{standalone: true}" 
          required
        />
      </div>
    </div>

    <!-- üîπ Mensajes de Error -->
    <div class="error-messages" *ngIf="errors.length > 0">
      <ul>
        <li *ngFor="let error of errors">{{ error }}</li>
      </ul>
    </div>

    <button type="submit" class="btn custom-btn-success">Guardar Cambios</button>
  </form>
</div>
