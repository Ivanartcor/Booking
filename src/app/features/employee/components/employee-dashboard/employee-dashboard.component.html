<main class="container dashboard-container">
  <!-- Cabecera con imagen y calendario -->
  <div class="row align-items-stretch">
    <!-- Imagen principal -->
    <div class="col-md-8 header-image p-0">
      <img src="/assets/images/employee-image.jpg" alt="Imagen principal" class="img-fluid w-100 h-100" />
    </div>

    <!-- Calendario al lado de la imagen -->
    <div class="col-md-4">
      <app-calendar></app-calendar>
    </div>
  </div>

  <!-- Indicador de carga -->
  <div *ngIf="isLoading" class="loading-indicator">
    <p>Cargando servicios...</p>
  </div>

  <!-- Mensaje de error o lista de servicios -->
  <div *ngIf="!isLoading && errorMessage; else serviceList">
    <p class="error">{{ errorMessage }}</p>
  </div>

  <!-- Lista de servicios -->
  <ng-template #serviceList>
    <div *ngIf="services.length > 0; else noServices">
      <h1>Servicios</h1>
      <ul>
        <li *ngFor="let service of services" (click)="openServiceModal(service)">
          <h2>{{ service.name }}</h2>
          <p><strong>Descripción:</strong> {{ service.description }}</p>
          <p><strong>Precio:</strong> {{ service.price + '€' }} </p>
          <p><strong>Días:</strong> {{ service.availability.days.join(', ') }} </p>
          <p><strong>Horas:</strong> {{ service.availability.hours.start }} - {{ service.availability.hours.end }} </p>
        </li>
      </ul>
    </div>
  </ng-template>

  <!-- Mensaje cuando no hay servicios -->
  <ng-template #noServices>
    <p>No hay servicios disponibles.</p>
  </ng-template>

  <!-- Modal de servicio -->
  <div class="modal" tabindex="-1" [class.show]="isModalOpen" (click)="closeModal($event)">
    <div class="modal-dialog" (click)="stopPropagation($event)">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{ selectedService?.name || 'Servicio no disponible' }}</h5>
          <button type="button" class="close" (click)="closeModal($event)">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p><strong>Descripción:</strong> {{ selectedService?.description }}</p>
          <p><strong>Precio:</strong> {{ selectedService?.price + '€' }}</p>
          <p><strong>Días:</strong> {{ selectedService?.availability?.days.join(', ') }}</p>
          <p><strong>Horas:</strong> {{ selectedService?.availability?.hours.start }} - {{
            selectedService?.availability?.hours.end }}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-edit" (click)="editService()">Editar</button>
          <button type="button" class="btn btn-delete" (click)="deleteService()">Eliminar</button>
        </div>
      </div>
    </div>
  </div>
</main>